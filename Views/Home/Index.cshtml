@using Newtonsoft.Json

@{
    ViewData["Title"] = "Home Page";
}

<div class="parent">
    <section class="left-nav">
        @Html.Partial("_Menu")
    </section>

    <section class="right-nav">
        
    </section>
</div>

@*<a target="_blank" href="https://icons8.com/icon/2797/home">Home</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a>*@

<script type="text/javascript">

    var model_d = @Html.Raw(JsonConvert.SerializeObject(ViewBag.Department));
    if (model_d.length == 0)
    {
        let buttons = document.querySelectorAll("button");
        for(let i = 0; i < buttons.length; i++){
            buttons[i].setAttribute('disabled', '');
        }
    }

    if(localStorage.length > 0){
        if(localStorage.getItem("opened") != null){
            console.log(localStorage.getItem("opened"));
        }
    }

    function departmentClick(t)
    {
        let span = t.querySelector("span");
        let svgPath = t.querySelector("svg path");
        let id = t.getAttribute('id');
        let departA1 = document.querySelectorAll(".departments__a");
        let departA2 = document.querySelectorAll(".departments__a2");
        let departA3 = document.querySelectorAll(".departments__a3");

        let b = document.querySelectorAll(".departments__ button");
        let c = document.querySelectorAll(".departments__ button svg path");

        if (!t.hasAttribute('opened'))
        {
            for (let i = 0; i < departA1.length; i++)
            {
                if (departA1[i].getAttribute('id') == id) {
                    departA1[i].style.display = '';
                    svgPath.setAttribute('d', 'm572.501 747-254.933 815.893-101.867-31.786 278.507-890.774h1105.813v-320H783.808L612.181 107H.021v1546.667c0 88.213 71.787 160 160 160h1388.054c75.946 0 141.973-54.08 156.906-128.64L1892.608 747H572.501Z');
                    t.setAttribute('opened', '');

                    localStorage.setItem('opened', id);
                }
                else {
                    departA1[i].style.display = 'none';
                    b[i].removeAttribute('opened');
                    c[i].setAttribute('d', 'M225.882 564.765V451.824h764.386L764.386 113H0v1524.706c0 93.402 76.01 169.412 169.412 169.412h1581.176c93.403 0 169.412-76.01 169.412-169.412V564.765H225.882Z');
                }    
            }
            for (let i = 0; i < departA2.length; i++)
            {
                if (departA2[i].getAttribute('id') == id) {
                    departA2[i].style.display = '';
                }   
                else {
                    departA2[i].style.display = 'none';
                }     
            }
            for (let i = 0; i < departA3.length; i++)
            {
                if (departA3[i].getAttribute('id') == id) {
                    departA3[i].style.display = '';
                }  
                else {
                    departA3[i].style.display = 'none';
                } 
            }
        }
        else 
        {
            svgPath.setAttribute('d', 'M225.882 564.765V451.824h764.386L764.386 113H0v1524.706c0 93.402 76.01 169.412 169.412 169.412h1581.176c93.403 0 169.412-76.01 169.412-169.412V564.765H225.882Z');
            t.removeAttribute('opened');
            for (let i = 0; i < departA1.length; i++)
            {
                if (departA1[i].getAttribute('id') == id)
                    departA1[i].style.display = 'none';
            }
            for (let i = 0; i < departA2.length; i++)
            {
                if (departA2[i].getAttribute('id') == id)
                    departA2[i].style.display = 'none';
            }
            for (let i = 0; i < departA3.length; i++)
            {
                if (departA3[i].getAttribute('id') == id)
                    departA3[i].style.display = 'none';
            }

            localStorage.removeItem("opened");
        }
    };

    function departmentClick2(t) 
    {
        let svg = t.querySelector("svg");
        let svgPath = t.querySelector("svg path");

        if (!t.hasAttribute('opened')) 
        {
            svgPath.setAttribute('d', 'm572.501 747-254.933 815.893-101.867-31.786 278.507-890.774h1105.813v-320H783.808L612.181 107H.021v1546.667c0 88.213 71.787 160 160 160h1388.054c75.946 0 141.973-54.08 156.906-128.64L1892.608 747H572.501Z')
            t.setAttribute('opened', '');
        }
        else 
        {
            svgPath.setAttribute('d', 'M225.882 564.765V451.824h764.386L764.386 113H0v1524.706c0 93.402 76.01 169.412 169.412 169.412h1581.176c93.403 0 169.412-76.01 169.412-169.412V564.765H225.882Z');
            t.removeAttribute('opened');
        }
    };

    function hideA() 
    {
        let a = document.querySelectorAll(".departments__ a");
        for (let i = 0; i < a.length; i++)
        {
            a[i].style.display = 'none';
        }
    };
    hideA();

    


    if(localStorage.length > 0){
        if(localStorage.getItem("opened") != null){
            let id = localStorage.getItem("opened")

            let departA1 = document.querySelectorAll(".departments__a");
            let departA2 = document.querySelectorAll(".departments__a2");
            let departA3 = document.querySelectorAll(".departments__a3");

            let d = document.querySelectorAll(".departments__ button");
            let d_svgPath = document.querySelectorAll(".departments__ button svg path");
            for(let i = 0; i < d.length; i++){
                if(d[i].getAttribute('id') == id){
                    d_svgPath[i].setAttribute('d', 'm572.501 747-254.933 815.893-101.867-31.786 278.507-890.774h1105.813v-320H783.808L612.181 107H.021v1546.667c0 88.213 71.787 160 160 160h1388.054c75.946 0 141.973-54.08 156.906-128.64L1892.608 747H572.501Z');
                    d[i].setAttribute('opened', '');
                    for(let j = 0; j < departA1.length; j++){
                        departA1[i].style.display = ''; /*departA1[i].style.opacity = '0.6'; departA1[i].style.pointerEvents = 'none';*/
                    }
                    for(let j = 0; j < departA2.length; j++){
                        departA2[i].style.display = ''; /*departA2[i].style.opacity = '0.6'; departA2[i].style.pointerEvents = 'none';*/
                    }
                    for(let j = 0; j < departA3.length; j++){
                        departA3[i].style.display = ''; /*departA3[i].style.opacity = '0.6'; departA3[i].style.pointerEvents = 'none';*/
                    }
                }
            }
        }
    }


</script>

